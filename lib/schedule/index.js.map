{"version":3,"sources":["../../src/schedule/index.js"],"names":["CronJob","require","job1","prisma","deleteManyGroupMessages","job2","deleteManyMessages","start"],"mappings":";;AAAA;;AAEA;AACA,IAAIA,OAAO,GAAGC,OAAO,CAAC,MAAD,CAAP,CAAgBD,OAA9B,C,CAEA;;;AACA,IAAIE,IAAI,GAAG,IAAIF,OAAJ,CAAY,gBAAZ,EAA8B,YAAW;AAClDG,uBAAOC,uBAAP;AACD,CAFU,EAER,IAFQ,EAEF,IAFE,EAEI,eAFJ,CAAX,C,CAGA;;AACA,IAAIC,IAAI,GAAG,IAAIL,OAAJ,CAAY,gBAAZ,EAA8B,YAAW;AAChDG,uBAAOG,kBAAP;AACD,CAFQ,EAEN,IAFM,EAEA,IAFA,EAEM,eAFN,CAAX;AAIAJ,IAAI,CAACK,KAAL,G,CAAc;;AACdF,IAAI,CAACE,KAAL,G,CAAc;AAGd","sourcesContent":["import { prisma } from '../generated/prisma-client'\r\n\r\n// 定时清理聊天记录\r\nvar CronJob = require('cron').CronJob;\r\n\r\n// 删除群聊记录\r\nvar job1 = new CronJob('00 00 03 * * *', function() {\r\n  prisma.deleteManyGroupMessages()\r\n}, null, true, 'Asia/Shanghai');\r\n// 删除单聊记录\r\nvar job2 = new CronJob('00 05 03 * * *', function() {\r\n    prisma.deleteManyMessages()\r\n  }, null, true, 'Asia/Shanghai');\r\n\r\njob1.start(); // job 1 started\r\njob2.start(); // job 2 started\r\n\r\n\r\n// 定时删除Persons"],"file":"index.js"}