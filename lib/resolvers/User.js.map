{"version":3,"sources":["../../src/resolvers/User.js"],"names":["User","id","parent","args","ctx","db","user","name","avatar","posts","birthday","birthplace","residence","families","userId","Error","uid","studies","orderBy","regStatus","works","exam","messages","where","OR","from","to","first","friends","relativefamilyGroups","groupUsersId","meAndSpousesfamilies","push","meFamilies","mySpouseFamilies","filter","family","indexOf","relationship","mySpouseFamily","mySpouse","spouseFamilies","myFamilies","familyFather","length","father","fatherFamilies","fatherFamilyFather","grandpa","motherFamilyFather","grandma","familyMother","mother","motherFamilies","fatherFamilyMother","motherFamilyMother","sonAndDaughters","sonAndDaughter","sd","familyGroups","map","usersId","users_some","workGroups","AND","colleagues_some","worker","classGroups","members_some","student","colleagues","groupMessages","locationGroups","loveSetting","loveWoman","loveMan","signUpLove","skills","fitConditions","nofitConditions","projects"],"mappings":";;;;;;;AAAA;;;;;;AAIO,IAAMA,IAAI,GAAG;AAClBC,EAAAA,EAAE,EAAC,YAACC,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BA,EAA/B,EAAvB;AAAA,GADe;AAElBM,EAAAA,IAAI,EAAC,cAACL,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BM,IAA/B,EAAvB;AAAA,GAFa;AAGlBC,EAAAA,MAAM,EAAC,gBAACN,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BO,MAA/B,EAAvB;AAAA,GAHW;AAIlBC,EAAAA,KAAK,EAAE,eAACP,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BQ,KAA/B,EAAvB;AAAA,GAJW;AAKlBC,EAAAA,QAAQ,EAAE,kBAACR,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BS,QAA/B,EAAvB;AAAA,GALQ;AAMlBC,EAAAA,UAAU,EAAE,oBAACT,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BU,UAA/B,EAAvB;AAAA,GANM;AAOlBC,EAAAA,SAAS,EAAE,mBAACV,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BW,SAA/B,EAAvB;AAAA,GAPO;AAQlBC,EAAAA,QAAQ;AAAA;AAAA;AAAA,4BAAE,iBAAOX,MAAP,EAAeC,IAAf,EAAqBC,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AACFU,cAAAA,MADE,GACO,sBAAUV,GAAV,CADP;;AAAA,kBAEHU,MAFG;AAAA;AAAA;AAAA;;AAAA,oBAGA,IAAIC,KAAJ,CAAU,OAAV,CAHA;;AAAA;AAAA,oBAKJD,MAAM,KAAKZ,MAAM,CAACc,GALd;AAAA;AAAA;AAAA;;AAAA,oBAMA,IAAID,KAAJ,CAAU,gBAAV,CANA;;AAAA;AAAA,+CASAX,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,gBAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,eAAZ,EAA+BY,QAA/B,EATA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KARU;AAoBlBI,EAAAA,OAAO,EAAE,iBAACf,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BgB,OAA/B,CAAuC;AAACC,MAAAA,OAAO,EAAC;AAAT,KAAvC,CAAvB;AAAA,GApBS;AAqBlBC,EAAAA,SAAS,EAAE,mBAACjB,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BkB,SAA/B,EAAvB;AAAA,GArBO;AAsBlBC,EAAAA,KAAK,EAAE,eAAClB,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BmB,KAA/B,EAAvB;AAAA,GAtBW;AAuBlBC,EAAAA,IAAI,EAAE,cAACnB,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BoB,IAA/B,EAAvB;AAAA,GAvBY;AAwBlBC,EAAAA,QAAQ;AAAA;AAAA;AAAA,4BAAC,kBAAOpB,MAAP,EAAeC,IAAf,EAAqBC,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AACDU,cAAAA,MADC,GACQ,sBAAUV,GAAV,CADR;;AAAA,kBAEFU,MAFE;AAAA;AAAA;AAAA;;AAAA,oBAGC,IAAIC,KAAJ,CAAU,OAAV,CAHD;;AAAA;AAAA,oBAKHD,MAAM,KAAKZ,MAAM,CAACc,GALf;AAAA;AAAA;AAAA;;AAAA,gDAME,EANF;;AAAA;AAAA;AAAA,qBASgBZ,GAAG,CAACC,EAAJ,CAAOiB,QAAP,CAAgB;AACrCC,gBAAAA,KAAK,EAAC;AAACC,kBAAAA,EAAE,EAAC,CACR;AAACC,oBAAAA,IAAI,EAAC;AAACxB,sBAAAA,EAAE,EAACC,MAAM,CAACD;AAAX;AAAN,mBADQ,EAER;AAACyB,oBAAAA,EAAE,EAAC;AAACzB,sBAAAA,EAAE,EAACC,MAAM,CAACD;AAAX;AAAJ,mBAFQ;AAAJ,iBAD+B;AAKrC0B,gBAAAA,KAAK,EAAC;AAL+B,eAAhB,CAThB;;AAAA;AASDL,cAAAA,QATC;AAAA,gDAgBAA,QAhBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA;AAAA;AAAA;;AAAA;AAAA,KAxBU;AA0ClBM,EAAAA,OAAO,EAAE,iBAAC1B,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+B2B,OAA/B,EAAvB;AAAA,GA1CS;AA2ClBC,EAAAA,oBAAoB;AAAA;AAAA;AAAA,4BAAC,kBAAO3B,MAAP,EAAeC,IAAf,EAAqBC,GAArB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACbU,cAAAA,MADa,GACJ,sBAAUV,GAAV,CADI;;AAAA,kBAEdU,MAFc;AAAA;AAAA;AAAA;;AAAA,oBAGX,IAAIC,KAAJ,CAAU,OAAV,CAHW;;AAAA;AAAA;AAAA,qBAKAX,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEU,gBAAAA,GAAG,EAAEF;AAAP,eAAZ,CALA;;AAAA;AAKbR,cAAAA,IALa;;AAAA,kBAMdA,IANc;AAAA;AAAA;AAAA;;AAAA,oBAOX,IAAIS,KAAJ,CAAU,OAAV,CAPW;;AAAA;AAAA,oBASfD,MAAM,KAAKZ,MAAM,CAACc,GATH;AAAA;AAAA;AAAA;;AAAA,gDAUV,EAVU;;AAAA;AAabc,cAAAA,YAba,GAaE,EAbF;AAcbC,cAAAA,oBAda,GAcU,EAdV;AAenBD,cAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,gBAAAA,EAAE,EAACK,IAAI,CAACL;AAAT,eAAlB;AAfmB;AAAA,qBAgBMG,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAACL,gBAAAA,EAAE,EAACK,IAAI,CAACL;AAAT,eAAZ,EAA0BY,QAA1B,EAhBN;;AAAA;AAgBboB,cAAAA,UAhBa;AAiBnBF,cAAAA,oBAAoB,CAACC,IAArB,CAA0BC,UAA1B,EAjBmB,CAkBnB;;AACMC,cAAAA,gBAnBa,GAmBMD,UAAU,CAACE,MAAX,CAAkB,UAAAC,MAAM;AAAA,uBAAE,CAAC,CAAC,CAAC,CAAC,MAAD,EAAQ,SAAR,EAAmBC,OAAnB,CAA2BD,MAAM,CAACE,YAAlC,CAAL;AAAA,eAAxB,CAnBN;AAAA;AAAA;AAAA;AAAA;AAAA,0BAoBUJ,gBApBV;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoBRK,cAAAA,cApBQ;AAAA;AAAA,qBAqBMnC,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAACsC,cAAc,CAACtC;AAAnB,eAAd,EAAsCyB,EAAtC,GAA2CpB,IAA3C,EArBN;;AAAA;AAqBXkC,cAAAA,QArBW;;AAAA,mBAsBdA,QAtBc;AAAA;AAAA;AAAA;;AAuBfV,cAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,gBAAAA,EAAE,EAACuC,QAAQ,CAACvC;AAAb,eAAlB;AAvBe;AAAA,qBAwBcG,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAACL,gBAAAA,EAAE,EAACuC,QAAQ,CAACvC;AAAb,eAAZ,EAA8BY,QAA9B,EAxBd;;AAAA;AAwBT4B,cAAAA,cAxBS;AAyBfV,cAAAA,oBAAoB,CAACC,IAArB,CAA0BS,cAA1B;;AAzBe;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,yBA4BKV,oBA5BL;AAAA;AAAA;AAAA;;AA4BTW,cAAAA,UA5BS,GA4BKX,oBA5BL;AA6BXY,cAAAA,YA7BW,GA6BID,UAAU,CAACP,MAAX,CAAkB,UAAAC,MAAM;AAAA,uBAAEA,MAAM,CAACE,YAAP,KAAsB,QAAxB;AAAA,eAAxB,CA7BJ;;AAAA,oBA8BdK,YAAY,CAACC,MAAb,GAAoB,CA9BN;AAAA;AAAA;AAAA;;AAAA;AAAA,qBA+BMxC,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAAC0C,YAAY,CAAC,CAAD,CAAZ,CAAgB1C;AAApB,eAAd,EAAuCyB,EAAvC,GAA4CpB,IAA5C,EA/BN;;AAAA;AA+BTuC,cAAAA,MA/BS;;AAAA,mBAgCZA,MAhCY;AAAA;AAAA;AAAA;;AAiCbf,cAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,gBAAAA,EAAE,EAAC4C,MAAM,CAAC5C;AAAX,eAAlB;AAjCa;AAAA,qBAkCgBG,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAACL,gBAAAA,EAAE,EAAC4C,MAAM,CAAC5C;AAAX,eAAZ,EAA4BY,QAA5B,EAlChB;;AAAA;AAkCPiC,cAAAA,cAlCO;AAmCPC,cAAAA,kBAnCO,GAmCcD,cAAc,CAACX,MAAf,CAAsB,UAAAC,MAAM;AAAA,uBAAEA,MAAM,CAACE,YAAP,KAAsB,QAAxB;AAAA,eAA5B,CAnCd;;AAAA,oBAoCVS,kBAAkB,CAACH,MAAnB,GAA0B,CApChB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAqCWxC,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAAC8C,kBAAkB,CAAC,CAAD,CAAlB,CAAsB9C;AAA1B,eAAd,EAA6CyB,EAA7C,GAAkDpB,IAAlD,EArCX;;AAAA;AAqCL0C,cAAAA,OArCK;;AAsCX,kBAAGA,OAAH,EAAW;AACTlB,gBAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,kBAAAA,EAAE,EAAC+C,OAAO,CAAC/C;AAAZ,iBAAlB;AACD;;AAxCU;AA0CPgD,cAAAA,kBA1CO,GA0CcH,cAAc,CAACX,MAAf,CAAsB,UAAAC,MAAM;AAAA,uBAAEA,MAAM,CAACE,YAAP,KAAsB,QAAxB;AAAA,eAA5B,CA1Cd;;AAAA,oBA2CVW,kBAAkB,CAACL,MAAnB,GAA0B,CA3ChB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBA4CYxC,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAACgD,kBAAkB,CAAC,CAAD,CAAlB,CAAsBhD;AAA1B,eAAd,EAA6CyB,EAA7C,GAAkDpB,IAAlD,EA5CZ;;AAAA;AA4CL4C,cAAAA,OA5CK;;AA6CX,kBAAGA,OAAH,EAAW;AACTpB,gBAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,kBAAAA,EAAE,EAACiD,OAAO,CAACjD;AAAZ,iBAAlB;AACD;;AA/CU;AAmDXkD,cAAAA,YAnDW,GAmDIT,UAAU,CAACP,MAAX,CAAkB,UAAAC,MAAM;AAAA,uBAAEA,MAAM,CAACE,YAAP,KAAsB,QAAxB;AAAA,eAAxB,CAnDJ;;AAAA,oBAoDda,YAAY,CAACP,MAAb,GAAoB,CApDN;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAqDMxC,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAACkD,YAAY,CAAC,CAAD,CAAZ,CAAgBlD;AAApB,eAAd,EAAuCyB,EAAvC,GAA4CpB,IAA5C,EArDN;;AAAA;AAqDT8C,cAAAA,MArDS;;AAAA,mBAsDZA,MAtDY;AAAA;AAAA;AAAA;;AAuDbtB,cAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,gBAAAA,EAAE,EAACmD,MAAM,CAACnD;AAAX,eAAlB;AAvDa;AAAA,qBAwDgBG,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAACL,gBAAAA,EAAE,EAACmD,MAAM,CAACnD;AAAX,eAAZ,EAA4BY,QAA5B,EAxDhB;;AAAA;AAwDPwC,cAAAA,cAxDO;AAyDPC,cAAAA,kBAzDO,GAyDcD,cAAc,CAAClB,MAAf,CAAsB,UAAAC,MAAM;AAAA,uBAAEA,MAAM,CAACE,YAAP,KAAsB,QAAxB;AAAA,eAA5B,CAzDd;;AAAA,oBA0DVgB,kBAAkB,CAACV,MAAnB,GAA0B,CA1DhB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBA2DWxC,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAACqD,kBAAkB,CAAC,CAAD,CAAlB,CAAsBrD;AAA1B,eAAd,EAA6CyB,EAA7C,GAAkDpB,IAAlD,EA3DX;;AAAA;AA2DL0C,cAAAA,QA3DK;;AA4DX,kBAAGA,QAAH,EAAW;AACTlB,gBAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,kBAAAA,EAAE,EAAC+C,QAAO,CAAC/C;AAAZ,iBAAlB;AACD;;AA9DU;AAiEPsD,cAAAA,kBAjEO,GAiEcF,cAAc,CAAClB,MAAf,CAAsB,UAAAC,MAAM;AAAA,uBAAEA,MAAM,CAACE,YAAP,KAAsB,QAAxB;AAAA,eAA5B,CAjEd;;AAAA,oBAkEViB,kBAAkB,CAACX,MAAnB,GAA0B,CAlEhB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAmEYxC,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAACsD,kBAAkB,CAAC,CAAD,CAAlB,CAAsBtD;AAA1B,eAAd,EAA6CyB,EAA7C,GAAkDpB,IAAlD,EAnEZ;;AAAA;AAmEL4C,cAAAA,QAnEK;;AAoEX,kBAAGA,QAAH,EAAW;AACTpB,gBAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,kBAAAA,EAAE,EAACiD,QAAO,CAACjD;AAAZ,iBAAlB;AACD;;AAtEU;AAAA;AAAA;AAAA;;AAAA;AA2EnB;AACMuD,cAAAA,eA5Ea,GA4EKvB,UAAU,CAACE,MAAX,CAAkB,UAAAC,MAAM;AAAA,uBAAE,CAAC,CAAC,CAAC,CAAC,KAAD,EAAO,UAAP,EAAmBC,OAAnB,CAA2BD,MAAM,CAACE,YAAlC,CAAL;AAAA,eAAxB,CA5EL;AAAA;AAAA;AAAA;AAAA;AAAA,2BA6ESkB,eA7ET;;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6ETC,cAAAA,cA7ES;AAAA;AAAA,qBA8EArD,GAAG,CAACC,EAAJ,CAAO+B,MAAP,CAAc;AAACnC,gBAAAA,EAAE,EAACwD,cAAc,CAACxD;AAAnB,eAAd,EAAsCyB,EAAtC,GAA2CpB,IAA3C,EA9EA;;AAAA;AA8EXoD,cAAAA,EA9EW;;AA+EjB,kBAAGA,EAAH,EAAM;AACJ5B,gBAAAA,YAAY,CAACE,IAAb,CAAkB;AAAC/B,kBAAAA,EAAE,EAACyD,EAAE,CAACzD;AAAP,iBAAlB;AACD;;AAjFgB;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,gDAmFXG,GAAG,CAACC,EAAJ,CAAOsD,YAAP,CAAoB;AAC1BpC,gBAAAA,KAAK,EAAC;AACJC,kBAAAA,EAAE,EAACM,YAAY,CAAC8B,GAAb,CAAiB,UAAAC,OAAO;AAAA,2BAAG;AAACC,sBAAAA,UAAU,EAACD;AAAZ,qBAAH;AAAA,mBAAxB;AADC;AADoB,eAApB,CAnFW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA;AAAA;AAAA;;AAAA;AAAA,KA3CF;AAoIlBE,EAAAA,UAAU,EAAC,oBAAC7D,MAAD,EAASC,IAAT,EAAeC,GAAf,EAAuB;AAChC,QAAMU,MAAM,GAAG,sBAAUV,GAAV,CAAf;;AACA,QAAIU,MAAM,KAAKZ,MAAM,CAACc,GAAtB,EAA2B;AACzB,aAAO,EAAP;AACD;;AACD,WAAQZ,GAAG,CAACC,EAAJ,CAAO0D,UAAP,CAAkB;AACxBxC,MAAAA,KAAK,EAAC;AAACyC,QAAAA,GAAG,EAAC,CACT;AAACC,UAAAA,eAAe,EAAC;AAACC,YAAAA,MAAM,EAAC;AAAClD,cAAAA,GAAG,EAACF;AAAL;AAAR;AAAjB,SADS;AAAL;AADkB,KAAlB,CAAR;AAKD,GA9IiB;AA+IlBqD,EAAAA,WAAW,EAAC,qBAACjE,MAAD,EAASC,IAAT,EAAeC,GAAf,EAAqB;AAC/B,QAAMU,MAAM,GAAG,sBAAUV,GAAV,CAAf;;AACA,QAAIU,MAAM,KAAKZ,MAAM,CAACc,GAAtB,EAA2B;AACzB,aAAO,EAAP;AACD;;AACD,WAAOZ,GAAG,CAACC,EAAJ,CAAO8D,WAAP,CAAmB;AACxB5C,MAAAA,KAAK,EAAC;AAACyC,QAAAA,GAAG,EAAC,CACT;AAACI,UAAAA,YAAY,EAAC;AAACC,YAAAA,OAAO,EAAC;AAACrD,cAAAA,GAAG,EAACF;AAAL;AAAT;AAAd,SADS;AAAL;AADkB,KAAnB,CAAP;AAKD,GAzJiB;AA2JlBwD,EAAAA,UAAU,EAAC,oBAACpE,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BqE,UAA/B,EAAvB;AAAA,GA3JO;AA4JlBC,EAAAA,aAAa,EAAC,uBAACrE,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BsE,aAA/B,EAAvB;AAAA,GA5JI;AA6JlBC,EAAAA,cAAc,EAAC,wBAACtE,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BuE,cAA/B,EAAvB;AAAA,GA7JG;AA8JlBC,EAAAA,WAAW,EAAC,qBAACvE,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+BwE,WAA/B,EAAvB;AAAA,GA9JM;AA+JlBC,EAAAA,SAAS,EAAC,mBAACxE,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+ByE,SAA/B,EAAvB;AAAA,GA/JQ;AAgKlBC,EAAAA,OAAO,EAAC,iBAACzE,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+B0E,OAA/B,EAAvB;AAAA,GAhKU;AAiKlBC,EAAAA,UAAU,EAAC,oBAAC1E,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+B2E,UAA/B,EAAvB;AAAA,GAjKO;AAkKlBC,EAAAA,MAAM,EAAC,gBAAC3E,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+B4E,MAA/B,EAAvB;AAAA,GAlKW;AAmKlBC,EAAAA,aAAa,EAAC,uBAAC5E,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+B6E,aAA/B,EAAvB;AAAA,GAnKI;AAoKlBC,EAAAA,eAAe,EAAC,yBAAC7E,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+B8E,eAA/B,EAAvB;AAAA,GApKE;AAqKlBC,EAAAA,QAAQ,EAAC,kBAAC9E,MAAD,EAASC,IAAT,EAAeC,GAAf;AAAA,WAAuBA,GAAG,CAACC,EAAJ,CAAOC,IAAP,CAAY;AAAEL,MAAAA,EAAE,EAAEC,MAAM,CAACD;AAAb,KAAZ,EAA+B+E,QAA/B,EAAvB;AAAA;AArKS,CAAb","sourcesContent":["import {\r\n  getUserId,\r\n} from '../services/utils'\r\n\r\nexport const User = {\r\n  id:(parent, args, ctx) => ctx.db.user({ id: parent.id }).id(),\r\n  name:(parent, args, ctx) => ctx.db.user({ id: parent.id }).name(),\r\n  avatar:(parent, args, ctx) => ctx.db.user({ id: parent.id }).avatar(),\r\n  posts: (parent, args, ctx) => ctx.db.user({ id: parent.id }).posts(),\r\n  birthday: (parent, args, ctx) => ctx.db.user({ id: parent.id }).birthday(),\r\n  birthplace: (parent, args, ctx) => ctx.db.user({ id: parent.id }).birthplace(),\r\n  residence: (parent, args, ctx) => ctx.db.user({ id: parent.id }).residence(),\r\n  families: async (parent, args, ctx) => {\r\n    const userId = getUserId(ctx)\r\n    if (!userId) {\r\n      throw new Error(\"用户不存在\")\r\n    }\r\n    if (userId !== parent.uid) {\r\n      throw new Error('Author Invalid')\r\n    }\r\n\r\n     return ctx.db.user({ id: parent.id }).families()\r\n    },\r\n\r\n  studies: (parent, args, ctx) => ctx.db.user({ id: parent.id }).studies({orderBy:\"startTime_ASC\"}),\r\n  regStatus: (parent, args, ctx) => ctx.db.user({ id: parent.id }).regStatus(),\r\n  works: (parent, args, ctx) => ctx.db.user({ id: parent.id }).works(),\r\n  exam: (parent, args, ctx) => ctx.db.user({ id: parent.id }).exam(),\r\n  messages:async (parent, args, ctx) => {\r\n    const userId = getUserId(ctx)\r\n    if (!userId) {\r\n      throw new Error(\"用户不存在\")\r\n    }\r\n    if (userId !== parent.uid) {\r\n      return []\r\n      // throw new Error('Author Invalid')\r\n    }\r\n    const messages = await ctx.db.messages({\r\n      where:{OR:[\r\n        {from:{id:parent.id}},\r\n        {to:{id:parent.id}}\r\n      ]},\r\n      first:10\r\n    })\r\n    return messages\r\n  },\r\n  friends: (parent, args, ctx) => ctx.db.user({ id: parent.id }).friends(),\r\n  relativefamilyGroups:async (parent, args, ctx) => {\r\n    const userId = getUserId(ctx)\r\n    if (!userId) {\r\n      throw new Error(\"用户不存在\")\r\n    }\r\n    const user = await ctx.db.user({ uid: userId })\r\n    if (!user) {\r\n      throw new Error(\"用户不存在\")\r\n    }\r\n    if (userId !== parent.uid) {\r\n      return []\r\n      // throw new Error('Author Invalid')\r\n    }\r\n    const groupUsersId = []\r\n    const meAndSpousesfamilies = []\r\n    groupUsersId.push({id:user.id})\r\n    const meFamilies = await ctx.db.user({id:user.id}).families()\r\n    meAndSpousesfamilies.push(meFamilies)\r\n    // 配偶\r\n    const mySpouseFamilies = meFamilies.filter(family=>!!~['wife','husband'].indexOf(family.relationship))\r\n    for (const mySpouseFamily of mySpouseFamilies ){\r\n      const mySpouse = await ctx.db.family({id:mySpouseFamily.id}).to().user()\r\n      if(mySpouse){\r\n        groupUsersId.push({id:mySpouse.id})\r\n        const spouseFamilies = await ctx.db.user({id:mySpouse.id}).families()\r\n        meAndSpousesfamilies.push(spouseFamilies)\r\n      }\r\n    }\r\n    for(const myFamilies of meAndSpousesfamilies){\r\n      const familyFather = myFamilies.filter(family=>family.relationship==='father')\r\n      if(familyFather.length>0){\r\n        const father = await ctx.db.family({id:familyFather[0].id}).to().user()\r\n        if(father){\r\n          groupUsersId.push({id:father.id})\r\n          const fatherFamilies = await ctx.db.user({id:father.id}).families()\r\n          const fatherFamilyFather = fatherFamilies.filter(family=>family.relationship==='father')\r\n          if(fatherFamilyFather.length>0){\r\n            const grandpa = await ctx.db.family({id:fatherFamilyFather[0].id}).to().user()\r\n            if(grandpa){\r\n              groupUsersId.push({id:grandpa.id})\r\n            }\r\n          }\r\n          const motherFamilyFather = fatherFamilies.filter(family=>family.relationship==='mother')\r\n          if(motherFamilyFather.length>0){\r\n            const grandma =  await ctx.db.family({id:motherFamilyFather[0].id}).to().user()\r\n            if(grandma){\r\n              groupUsersId.push({id:grandma.id})\r\n            }\r\n          }\r\n        }\r\n      }\r\n      const familyMother = myFamilies.filter(family=>family.relationship==='mother')\r\n      if(familyMother.length>0){\r\n        const mother = await ctx.db.family({id:familyMother[0].id}).to().user()\r\n        if(mother){\r\n          groupUsersId.push({id:mother.id})\r\n          const motherFamilies = await ctx.db.user({id:mother.id}).families()\r\n          const fatherFamilyMother = motherFamilies.filter(family=>family.relationship==='father')\r\n          if(fatherFamilyMother.length>0){\r\n            const grandpa = await ctx.db.family({id:fatherFamilyMother[0].id}).to().user()\r\n            if(grandpa){\r\n              groupUsersId.push({id:grandpa.id})\r\n            }\r\n          }\r\n          \r\n          const motherFamilyMother = motherFamilies.filter(family=>family.relationship==='mother')\r\n          if(motherFamilyMother.length>0){\r\n            const grandma =  await ctx.db.family({id:motherFamilyMother[0].id}).to().user()\r\n            if(grandma){\r\n              groupUsersId.push({id:grandma.id})\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // 我的群由子女负责创建\r\n    const sonAndDaughters = meFamilies.filter(family=>!!~['son','daughter'].indexOf(family.relationship))\r\n    for(const sonAndDaughter of sonAndDaughters){\r\n      const sd = await ctx.db.family({id:sonAndDaughter.id}).to().user()\r\n      if(sd){\r\n        groupUsersId.push({id:sd.id})\r\n      }\r\n    }\r\n    return  ctx.db.familyGroups({\r\n      where:{\r\n        OR:groupUsersId.map(usersId=>({users_some:usersId}))\r\n      }\r\n    })\r\n  },\r\n  workGroups:(parent, args, ctx) => {\r\n    const userId = getUserId(ctx)\r\n    if (userId !== parent.uid) {\r\n      return []\r\n    }\r\n    return  ctx.db.workGroups({\r\n      where:{AND:[\r\n        {colleagues_some:{worker:{uid:userId}}}\r\n      ]}\r\n    })\r\n  },\r\n  classGroups:(parent, args, ctx)=>{\r\n    const userId = getUserId(ctx)\r\n    if (userId !== parent.uid) {\r\n      return []\r\n    }\r\n    return ctx.db.classGroups({\r\n      where:{AND:[\r\n        {members_some:{student:{uid:userId}}}\r\n      ]}\r\n    })\r\n  },\r\n  \r\n  colleagues:(parent, args, ctx) => ctx.db.user({ id: parent.id }).colleagues(),\r\n  groupMessages:(parent, args, ctx) => ctx.db.user({ id: parent.id }).groupMessages(),\r\n  locationGroups:(parent, args, ctx) => ctx.db.user({ id: parent.id }).locationGroups(),\r\n  loveSetting:(parent, args, ctx) => ctx.db.user({ id: parent.id }).loveSetting(),\r\n  loveWoman:(parent, args, ctx) => ctx.db.user({ id: parent.id }).loveWoman(),\r\n  loveMan:(parent, args, ctx) => ctx.db.user({ id: parent.id }).loveMan(),\r\n  signUpLove:(parent, args, ctx) => ctx.db.user({ id: parent.id }).signUpLove(),\r\n  skills:(parent, args, ctx) => ctx.db.user({ id: parent.id }).skills(),\r\n  fitConditions:(parent, args, ctx) => ctx.db.user({ id: parent.id }).fitConditions(),\r\n  nofitConditions:(parent, args, ctx) => ctx.db.user({ id: parent.id }).nofitConditions(),\r\n  projects:(parent, args, ctx) => ctx.db.user({ id: parent.id }).projects(),\r\n}\r\n"],"file":"User.js"}